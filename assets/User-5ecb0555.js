var Jr=Object.defineProperty;var Yr=(t,e,r)=>e in t?Jr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ye=(t,e,r)=>(Yr(t,typeof e!="symbol"?e+"":e,r),r);import{b as ne,c as le,f as R,g as nt,t as Te,_ as kr,h as Ht,u as Se,e as je,r as Xe,i as wt,j as Vr,F as mr,k as gr,n as Zr,l as en,m as yr}from"./index-fff3b804.js";import{g as tn}from"./_commonjsHelpers-725317a4.js";const rn="/pegasus/assets/404-error-74c25dd8.png",nn={class:"min-h-screen flex flex-col"},sn={class:"px-10 flex flex-col justify-center items-center flex-grow"},on=R("img",{src:rn,alt:"404 Error",class:"w-52"},null,-1),an={class:"text-2xl text-center"},un=R("br",null,null,-1),ln=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),cn=R("div",{class:"text-xs ml-auto mr-2 mb-1 text-right"},[R("a",{href:"https://www.flaticon.com/free-icons/404-error",title:"404 error icons"},"404 error icons created by Ghozi Muhtarom - Flaticon")],-1),fn={__name:"UserNotFound",props:{username:String},setup(t){return(e,r)=>(ne(),le("div",nn,[R("div",sn,[on,R("p",an,[nt(" Sorry, but we could not find the user "),R("i",null,Te(t.username),1),nt("."),un,nt("Perhaps you have mistyped? ")]),R("button",{class:"btn btn-outline btn-primary m-6 gap-3",onClick:r[0]||(r[0]=n=>e.$router.push("/"))},[ln,nt(" Go back home ")])]),cn]))}},hn={},pn={class:"px-10 flex flex-col justify-center items-center min-h-screen"},dn=R("progress",{class:"progress progress-primary w-1/4"},null,-1),_n=[dn];function mn(t,e){return ne(),le("div",pn,_n)}const gn=kr(hn,[["render",mn]]),Rr="/pegasus/assets/standard-avatar-022619a5.png",yn=["href"],bn={class:"stats shadow-2xl"},vn={class:"stat"},wn={class:"stat-figure"},En={class:"avatar"},Pn={class:"w-24 rounded-full"},Sn=["src"],Tn={class:"stat-value"},Cn={class:"stat-title text-right"},An={class:"stat"},kn=R("div",{class:"stat-title"},"Followers",-1),Rn={class:"stat-value text-right"},xn={class:"stat"},On={__name:"UserInfo",props:{data:Object},setup(t){return(e,r)=>{const n=Ht("flag");return ne(),le("a",{href:t.data.url,target:"_blank"},[R("div",bn,[R("div",vn,[R("div",wn,[R("div",En,[R("div",Pn,[R("img",{src:t.data.avatar??Se(Rr)},null,8,Sn)])])]),R("div",Tn,Te(t.data.name??t.data.username),1),R("div",Cn,Te(t.data.username),1)]),R("div",An,[kn,R("div",Rn,Te(t.data.followers),1)]),R("div",xn,[je(n,{iso:t.data.country.split("/").pop(),class:"stat-figure rounded-xl text-6xl"},null,8,["iso"])])])],8,yn)}}};function $n(t){return t==="string"?"":t==="object"?{}:t==="function"?()=>null:t==="array"?[]:null}function In(t,e){const r=[];for(let n=0;n<e.length;n+=1)if(e[n]!==void 0){for(;r.length<t.length&&(typeof e[n]!==t[r.length]||e[n]instanceof Array)&&(!(e[n]instanceof Array)||e[n]instanceof Array&&t[r.length]!=="array");)r.push($n(t[r.length]));r.length<t.length&&r.push(e[n])}return r}var Ae={sortParameters:In};const{sortParameters:qn}=Ae;function Ln(){this._requests=[],this._running=!1}function Nn(t,e,r,n,s,i){if(!t||typeof t!="function")throw Error("dispatch requires request function");if(!e||typeof e!="function")throw Error("dispatch requires callback function");const[a,u,p,_]=qn(["array","object","array","number"],[r,n,s,i]),C={method:t,callback:e,parameters:a,options:u,priority:_||1,callbackParameters:p||[]};this.enqueue(C)}function Mn(t){let e=!1;for(let r=0;r<this._requests.length;r+=1)if(this._requests[r].priority>t.priority){this._requests.splice(r,0,t),e=!0;break}e||this._requests.push(t),this._running||this.startRequests()}function Dn(){return this._requests.length===0?null:this._requests.shift()}function jn(){this._requests=[]}async function Hn(){for(;this._requests.length>0;){this._running||(this._running=!0);const t=this.dequeue(),{method:e,callback:r}=t;let n=null;const s=await e(...t.parameters,t.options).catch(i=>n=i);r(s,n,...t.callbackParameters)}this._running=!1}var Qn={queueSetup:Ln,dispatch:Nn,enqueue:Mn,dequeue:Dn,clearQueue:jn,startRequests:Hn},ke={},xr={};const z=function(t){if(!t)throw new Error("No builder supplied to constructor");this.host=t.host,this.port=t.port,this.scheme=t.scheme,this.queryParameters=t.queryParameters,this.bodyParameters=t.bodyParameters,this.headers=t.headers,this.path=t.path};z.prototype._getter=function(t){return function(){return this[t]}};z.prototype.getHost=z.prototype._getter("host");z.prototype.getPort=z.prototype._getter("port");z.prototype.getScheme=z.prototype._getter("scheme");z.prototype.getPath=z.prototype._getter("path");z.prototype.getQueryParameters=z.prototype._getter("queryParameters");z.prototype.getBodyParameters=z.prototype._getter("bodyParameters");z.prototype.getHeaders=z.prototype._getter("headers");z.prototype.getURI=function(){if(!this.scheme||!this.host||!this.port)throw new Error("Missing components necessary to construct URI");let t=`${this.scheme}://${this.host}`;return(this.scheme==="http"&&this.port!==80||this.scheme==="https"&&this.port!==443)&&(t+=`:${this.port}`),this.path&&(t+=this.path),t};z.prototype.getURL=function(){const t=this.getURI();return this.getQueryParameters()?t+this.getQueryParameterString(this.getQueryParameters()):t};z.prototype.getQueryParameterString=function(){const t=this.getQueryParameters();return t?`?${Object.keys(t).filter(e=>t[e]!==void 0).map(e=>`${e}=${t[e]}`).join("&")}`:""};z.prototype.execute=function(t,e){if(e)return t(this,e),null;const r=this;return new Promise((n,s)=>{t(r,(i,a)=>{i?s(i):n(a)})})};const Y=function(){};Y.prototype._setter=function(t){return function(e){return this[t]=e,this}};Y.prototype.withHost=Y.prototype._setter("host");Y.prototype.withPort=Y.prototype._setter("port");Y.prototype.withScheme=Y.prototype._setter("scheme");Y.prototype.withPath=Y.prototype._setter("path");Y.prototype._assigner=function(t){return function(){for(let e=0;e<arguments.length;e+=1)this[t]=this._assign(this[t],arguments[e]);return this}};Y.prototype.withQueryParameters=Y.prototype._assigner("queryParameters");Y.prototype.withBodyParameters=Y.prototype._assigner("bodyParameters");Y.prototype.withHeaders=Y.prototype._assigner("headers");Y.prototype._assign=function(t,e){return e&&Array.isArray(e)?e:e&&Object.keys(e).length>0?Object.assign(t||{},e):t};Y.prototype.build=function(){return new z(this)};xr.builder=function(){return new Y};const Un=xr,Kn="api.chess.com",Bn=443,Fn="https";ke.builder=function(){return Un.builder().withHost(Kn).withPort(Bn).withScheme(Fn)};var Qt={exports:{}},Or={exports:{}};(function(t){t.exports=e;function e(n){if(n)return r(n)}function r(n){for(var s in e.prototype)n[s]=e.prototype[s];return n}e.prototype.on=e.prototype.addEventListener=function(n,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(s),this},e.prototype.once=function(n,s){function i(){this.off(n,i),s.apply(this,arguments)}return i.fn=s,this.on(n,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+n];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var a,u=0;u<i.length;u++)if(a=i[u],a===s||a.fn===s){i.splice(u,1);break}return i.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),i=this._callbacks["$"+n],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(i){i=i.slice(0);for(var a=0,u=i.length;a<u;++a)i[a].apply(this,s)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(Or);var Gn=Or.exports,Wn=it;it.default=it;it.stable=qr;it.stableStringify=qr;var yt="[...]",$r="[Circular]",Ge=[],Ke=[];function Ir(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function it(t,e,r,n){typeof n>"u"&&(n=Ir()),Ut(t,"",0,[],void 0,0,n);var s;try{Ke.length===0?s=JSON.stringify(t,e,r):s=JSON.stringify(t,Lr(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Ge.length!==0;){var i=Ge.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return s}function Je(t,e,r,n){var s=Object.getOwnPropertyDescriptor(n,r);s.get!==void 0?s.configurable?(Object.defineProperty(n,r,{value:t}),Ge.push([n,r,e,s])):Ke.push([e,r,t]):(n[r]=t,Ge.push([n,r,e]))}function Ut(t,e,r,n,s,i,a){i+=1;var u;if(typeof t=="object"&&t!==null){for(u=0;u<n.length;u++)if(n[u]===t){Je($r,t,e,s);return}if(typeof a.depthLimit<"u"&&i>a.depthLimit){Je(yt,t,e,s);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){Je(yt,t,e,s);return}if(n.push(t),Array.isArray(t))for(u=0;u<t.length;u++)Ut(t[u],u,u,n,t,i,a);else{var p=Object.keys(t);for(u=0;u<p.length;u++){var _=p[u];Ut(t[_],_,u,n,t,i,a)}}n.pop()}}function zn(t,e){return t<e?-1:t>e?1:0}function qr(t,e,r,n){typeof n>"u"&&(n=Ir());var s=Kt(t,"",0,[],void 0,0,n)||t,i;try{Ke.length===0?i=JSON.stringify(s,e,r):i=JSON.stringify(s,Lr(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Ge.length!==0;){var a=Ge.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function Kt(t,e,r,n,s,i,a){i+=1;var u;if(typeof t=="object"&&t!==null){for(u=0;u<n.length;u++)if(n[u]===t){Je($r,t,e,s);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof a.depthLimit<"u"&&i>a.depthLimit){Je(yt,t,e,s);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){Je(yt,t,e,s);return}if(n.push(t),Array.isArray(t))for(u=0;u<t.length;u++)Kt(t[u],u,u,n,t,i,a);else{var p={},_=Object.keys(t).sort(zn);for(u=0;u<_.length;u++){var C=_[u];Kt(t[C],C,u,n,t,i,a),p[C]=t[C]}if(typeof s<"u")Ge.push([s,e,t]),s[e]=p;else return p}n.pop()}}function Lr(t){return t=typeof t<"u"?t:function(e,r){return r},function(e,r){if(Ke.length>0)for(var n=0;n<Ke.length;n++){var s=Ke[n];if(s[1]===e&&s[0]===r){r=s[2],Ke.splice(n,1);break}}return t.call(this,e,r)}}function _t(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(r){return typeof r}:_t=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_t(t)}function Xn(t){return t!==null&&_t(t)==="object"}var Nr=Xn;function mt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mt=function(r){return typeof r}:mt=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mt(t)}var bt=Nr,Jn=L;function L(t){if(t)return Yn(t)}function Yn(t){for(var e in L.prototype)Object.prototype.hasOwnProperty.call(L.prototype,e)&&(t[e]=L.prototype[e]);return t}L.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this};L.prototype.parse=function(t){return this._parser=t,this};L.prototype.responseType=function(t){return this._responseType=t,this};L.prototype.serialize=function(t){return this._serializer=t,this};L.prototype.timeout=function(t){if(!t||mt(t)!=="object")return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this};L.prototype.retry=function(t,e){return(arguments.length===0||t===!0)&&(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var Vn=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];L.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(t,e);if(r===!0)return!0;if(r===!1)return!1}catch(n){console.error(n)}return!!(e&&e.status&&e.status>=500&&e.status!==501||t&&(t.code&&Vn.includes(t.code)||t.timeout&&t.code==="ECONNABORTED"||t.crossDomain))};L.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()};L.prototype.then=function(t,e){var r=this;if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(s,i){n.on("abort",function(){if(!(r._maxRetries&&r._maxRetries>r._retries)){if(r.timedout&&r.timedoutError){i(r.timedoutError);return}var a=new Error("Aborted");a.code="ABORTED",a.status=r.status,a.method=r.method,a.url=r.url,i(a)}}),n.end(function(a,u){a?i(a):s(u)})})}return this._fullfilledPromise.then(t,e)};L.prototype.catch=function(t){return this.then(void 0,t)};L.prototype.use=function(t){return t(this),this};L.prototype.ok=function(t){if(typeof t!="function")throw new Error("Callback required");return this._okCallback=t,this};L.prototype._isResponseOK=function(t){return t?this._okCallback?this._okCallback(t):t.status>=200&&t.status<300:!1};L.prototype.get=function(t){return this._header[t.toLowerCase()]};L.prototype.getHeader=L.prototype.get;L.prototype.set=function(t,e){if(bt(t)){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this};L.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this};L.prototype.field=function(t,e){if(t==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(bt(t)){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.field(r,t[r]);return this}if(Array.isArray(e)){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.field(t,e[n]);return this}if(e==null)throw new Error(".field(name, val) val can not be empty");return typeof e=="boolean"&&(e=String(e)),this._getFormData().append(t,e),this};L.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)};L.prototype._auth=function(t,e,r,n){switch(r.type){case"basic":this.set("Authorization","Basic ".concat(n("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t));break}return this};L.prototype.withCredentials=function(t){return t===void 0&&(t=!0),this._withCredentials=t,this};L.prototype.redirects=function(t){return this._maxRedirects=t,this};L.prototype.maxResponseSize=function(t){if(typeof t!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=t,this};L.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};L.prototype.send=function(t){var e=bt(t),r=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&bt(this._data))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(this._data[n]=t[n]);else typeof t=="string"?(r||this.type("form"),r=this._header["content-type"],r==="application/x-www-form-urlencoded"?this._data=this._data?"".concat(this._data,"&").concat(t):t:this._data=(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(r||this.type("json"),this)};L.prototype.sortQuery=function(t){return this._sort=typeof t>"u"?!0:t,this};L.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var r=this.url.slice(e+1).split("&");typeof this._sort=="function"?r.sort(this._sort):r.sort(),this.url=this.url.slice(0,e)+"?"+r.join("&")}}};L.prototype._appendQueryString=function(){console.warn("Unsupported")};L.prototype._timeoutError=function(t,e,r){if(!this._aborted){var n=new Error("".concat(t+e,"ms exceeded"));n.timeout=e,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)}};L.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var at={};at.type=function(t){return t.split(/ *; */).shift()};at.params=function(t){return t.split(/ *; */).reduce(function(e,r){var n=r.split(/ *= */),s=n.shift(),i=n.shift();return s&&i&&(e[s]=i),e},{})};at.parseLinks=function(t){return t.split(/ *, */).reduce(function(e,r){var n=r.split(/ *; */),s=n[0].slice(1,-1),i=n[1].split(/ *= */)[1].slice(1,-1);return e[i]=s,e},{})};at.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t};var qt=at,Zn=Be;function Be(t){if(t)return es(t)}function es(t){for(var e in Be.prototype)Object.prototype.hasOwnProperty.call(Be.prototype,e)&&(t[e]=Be.prototype[e]);return t}Be.prototype.get=function(t){return this.header[t.toLowerCase()]};Be.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=qt.type(e);var r=qt.params(e);for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(this[n]=r[n]);this.links={};try{t.link&&(this.links=qt.parseLinks(t.link))}catch{}};Be.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=e===1,this.ok=e===2,this.redirect=e===3,this.clientError=e===4,this.serverError=e===5,this.error=e===4||e===5?this.toError():!1,this.created=t===201,this.accepted=t===202,this.noContent=t===204,this.badRequest=t===400,this.unauthorized=t===401,this.notAcceptable=t===406,this.forbidden=t===403,this.notFound=t===404,this.unprocessableEntity=t===422};function ts(t){return is(t)||ss(t)||ns(t)||rs()}function rs(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ns(t,e){if(t){if(typeof t=="string")return Bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bt(t,e)}}function ss(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function is(t){if(Array.isArray(t))return Bt(t)}function Bt(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zt(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(t){zt.prototype[t]=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this._defaults.push({fn:t,args:r}),this}});zt.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,ts(e.args))})};var os=zt;(function(t,e){function r(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(m){return typeof m}:r=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r(c)}var n;typeof window<"u"?n=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),n=void 0):n=self;var s=Gn,i=Wn,a=Jn,u=Nr,p=Zn,_=os;function C(){}t.exports=function(c,d){return typeof d=="function"?new e.Request("GET",c).end(d):arguments.length===1?new e.Request("GET",c):new e.Request(c,d)},e=t.exports;var E=e;e.Request=P,E.getXHR=function(){if(n.XMLHttpRequest&&(!n.location||n.location.protocol!=="file:"||!n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("Browser-only version of superagent could not find XHR")};var b="".trim?function(c){return c.trim()}:function(c){return c.replace(/(^\s*|\s*$)/g,"")};function D(c){if(!u(c))return c;var d=[];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&S(d,m,c[m]);return d.join("&")}function S(c,d,m){if(m!==void 0){if(m===null){c.push(encodeURI(d));return}if(Array.isArray(m))m.forEach(function($){S(c,d,$)});else if(u(m))for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&S(c,"".concat(d,"[").concat(v,"]"),m[v]);else c.push(encodeURI(d)+"="+encodeURIComponent(m))}}E.serializeObject=D;function O(c){for(var d={},m=c.split("&"),v,$,T=0,B=m.length;T<B;++T)v=m[T],$=v.indexOf("="),$===-1?d[decodeURIComponent(v)]="":d[decodeURIComponent(v.slice(0,$))]=decodeURIComponent(v.slice($+1));return d}E.parseString=O,E.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},E.serialize={"application/x-www-form-urlencoded":D,"application/json":i},E.parse={"application/x-www-form-urlencoded":O,"application/json":JSON.parse};function j(c){for(var d=c.split(/\r?\n/),m={},v,$,T,B,w=0,Q=d.length;w<Q;++w)$=d[w],v=$.indexOf(":"),v!==-1&&(T=$.slice(0,v).toLowerCase(),B=b($.slice(v+1)),m[T]=B);return m}function F(c){return/[/+]json($|[^-\w])/.test(c)}function ce(c){this.req=c,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType>"u"?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var d=this.xhr.status;d===1223&&(d=204),this._setStatusProperties(d),this.headers=j(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&c._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}p(ce.prototype),ce.prototype._parseBody=function(c){var d=E.parse[this.type];return this.req._parser?this.req._parser(this,c):(!d&&F(this.type)&&(d=E.parse["application/json"]),d&&c&&(c.length>0||c instanceof Object)?d(c):null)},ce.prototype.toError=function(){var c=this.req,d=c.method,m=c.url,v="cannot ".concat(d," ").concat(m," (").concat(this.status,")"),$=new Error(v);return $.status=this.status,$.method=d,$.url=m,$},E.Response=ce;function P(c,d){var m=this;this._query=this._query||[],this.method=c,this.url=d,this.header={},this._header={},this.on("end",function(){var v=null,$=null;try{$=new ce(m)}catch(B){return v=new Error("Parser is unable to parse the response"),v.parse=!0,v.original=B,m.xhr?(v.rawResponse=typeof m.xhr.responseType>"u"?m.xhr.responseText:m.xhr.response,v.status=m.xhr.status?m.xhr.status:null,v.statusCode=v.status):(v.rawResponse=null,v.status=null),m.callback(v)}m.emit("response",$);var T;try{m._isResponseOK($)||(T=new Error($.statusText||$.text||"Unsuccessful HTTP response"))}catch(B){T=B}T?(T.original=v,T.response=$,T.status=$.status,m.callback(T,$)):m.callback(null,$)})}s(P.prototype),a(P.prototype),P.prototype.type=function(c){return this.set("Content-Type",E.types[c]||c),this},P.prototype.accept=function(c){return this.set("Accept",E.types[c]||c),this},P.prototype.auth=function(c,d,m){arguments.length===1&&(d=""),r(d)==="object"&&d!==null&&(m=d,d=""),m||(m={type:typeof btoa=="function"?"basic":"auto"});var v=function(T){if(typeof btoa=="function")return btoa(T);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(c,d,m,v)},P.prototype.query=function(c){return typeof c!="string"&&(c=D(c)),c&&this._query.push(c),this},P.prototype.attach=function(c,d,m){if(d){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(c,d,m||d.name)}return this},P.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},P.prototype.callback=function(c,d){if(this._shouldRetry(c,d))return this._retry();var m=this._callback;this.clearTimeout(),c&&(this._maxRetries&&(c.retries=this._retries-1),this.emit("error",c)),m(c,d)},P.prototype.crossDomainError=function(){var c=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);c.crossDomain=!0,c.status=this.status,c.method=this.method,c.url=this.url,this.callback(c)},P.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},P.prototype.ca=P.prototype.agent,P.prototype.buffer=P.prototype.ca,P.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},P.prototype.pipe=P.prototype.write,P.prototype._isHost=function(c){return c&&r(c)==="object"&&!Array.isArray(c)&&Object.prototype.toString.call(c)!=="[object Object]"},P.prototype.end=function(c){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=c||C,this._finalizeQueryString(),this._end()},P.prototype._setUploadTimeout=function(){var c=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){c._timeoutError("Upload timeout of ",c._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},P.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var c=this;this.xhr=E.getXHR();var d=this.xhr,m=this._formData||this._data;this._setTimeouts(),d.onreadystatechange=function(){var w=d.readyState;if(w>=2&&c._responseTimeoutTimer&&clearTimeout(c._responseTimeoutTimer),w===4){var Q;try{Q=d.status}catch{Q=0}if(!Q)return c.timedout||c._aborted?void 0:c.crossDomainError();c.emit("end")}};var v=function(Q,H){H.total>0&&(H.percent=H.loaded/H.total*100,H.percent===100&&clearTimeout(c._uploadTimeoutTimer)),H.direction=Q,c.emit("progress",H)};if(this.hasListeners("progress"))try{d.addEventListener("progress",v.bind(null,"download")),d.upload&&d.upload.addEventListener("progress",v.bind(null,"upload"))}catch{}d.upload&&this._setUploadTimeout();try{this.username&&this.password?d.open(this.method,this.url,!0,this.username,this.password):d.open(this.method,this.url,!0)}catch(w){return this.callback(w)}if(this._withCredentials&&(d.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof m!="string"&&!this._isHost(m)){var $=this._header["content-type"],T=this._serializer||E.serialize[$?$.split(";")[0]:""];!T&&F($)&&(T=E.serialize["application/json"]),T&&(m=T(m))}for(var B in this.header)this.header[B]!==null&&Object.prototype.hasOwnProperty.call(this.header,B)&&d.setRequestHeader(B,this.header[B]);this._responseType&&(d.responseType=this._responseType),this.emit("request",this),d.send(typeof m>"u"?null:m)},E.agent=function(){return new _},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(c){_.prototype[c.toLowerCase()]=function(d,m){var v=new E.Request(c,d);return this._setDefaults(v),m&&v.end(m),v}}),_.prototype.del=_.prototype.delete,E.get=function(c,d,m){var v=E("GET",c);return typeof d=="function"&&(m=d,d=null),d&&v.query(d),m&&v.end(m),v},E.head=function(c,d,m){var v=E("HEAD",c);return typeof d=="function"&&(m=d,d=null),d&&v.query(d),m&&v.end(m),v},E.options=function(c,d,m){var v=E("OPTIONS",c);return typeof d=="function"&&(m=d,d=null),d&&v.send(d),m&&v.end(m),v};function V(c,d,m){var v=E("DELETE",c);return typeof d=="function"&&(m=d,d=null),d&&v.send(d),m&&v.end(m),v}E.del=V,E.delete=V,E.patch=function(c,d,m){var v=E("PATCH",c);return typeof d=="function"&&(m=d,d=null),d&&v.send(d),m&&v.end(m),v},E.post=function(c,d,m){var v=E("POST",c);return typeof d=="function"&&(m=d,d=null),d&&v.send(d),m&&v.end(m),v},E.put=function(c,d,m){var v=E("PUT",c);return typeof d=="function"&&(m=d,d=null),d&&v.send(d),m&&v.end(m),v}})(Qt,Qt.exports);var as=Qt.exports;function Mr(t,e){this.name="WebapiError",this.message=t||"",this.statusCode=e}Mr.prototype=Error.prototype;var Dr=Mr;const ut=as,pt=Dr,Ce={},Et=function(t){const e={};return t.getQueryParameters()&&(e.query=t.getQueryParameters()),t.getHeaders()&&t.getHeaders()["Content-Type"]==="application/json"?e.data=JSON.stringify(t.getBodyParameters()):t.getBodyParameters()&&(e.data=t.getBodyParameters()),t.getHeaders()&&(e.headers=t.getHeaders()),e},us=function(t,e){let r;if(typeof e.error=="object"&&typeof e.error.message=="string")r=new pt(e.error.message,e.error.status);else if(typeof e.error=="string")r=new pt(`${e.error}: ${e.error_description}`);else if(typeof e=="string")try{const n=JSON.parse(e);r=new pt(n.error.message,n.error.status)}catch{}return r||(r=new pt(`${t}: ${JSON.stringify(e)}`)),r};Ce._makeRequest=function(t,e,r,n){const s=t.bind(ut)(r);e.query&&s.query(e.query),e.data&&(!e.headers||e.headers["Content-Type"]!=="application/json")?(s.type("form"),s.send(e.data)):e.data&&s.send(e.data),e.headers&&s.set(e.headers),s.end((i,a)=>{if(i){const u=us("Request error",{error:i});return n(u)}return n(null,{body:a.body,headers:a.headers,statusCode:a.statusCode})})};Ce.get=function(t,e){const r=Et(t),n=ut.get;Ce._makeRequest(n,r,t.getURI(),e)};Ce.post=function(t,e){const r=Et(t),n=ut.post;Ce._makeRequest(n,r,t.getURI(),e)};Ce.del=function(t,e){const r=Et(t),n=ut.del;Ce._makeRequest(n,r,t.getURI(),e)};Ce.put=function(t,e){const r=Et(t),n=ut.put;Ce._makeRequest(n,r,t.getURI(),e)};var xe=Ce;const be=ke,ve=xe,{sortParameters:we}=Ae;function ls(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function cs(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/stats`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function fs(t,e,r,n){return new Error("This endpoint was removed by Chess.com, please see https://github.com/andyruwruw/chess-web-api/tree/master#getplayeronlineusername-options-callback")}function hs(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/games`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function ps(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/games/to-move`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function ds(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/games/archives`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function _s(t,e,r,n,s,i){const[a,u,p]=we(["object","function","object"],[n,s,i]);let _;return typeof r=="number"&&r<10||typeof r=="string"&&r.length===1?_=`0${r}`:_=`${r}`,be.builder().withPath(`/pub/player/${t}/games/${e}/${_}`).withQueryParameters(a).withHeaders(p).build().execute(ve.get,u)}function ms(t,e,r,n,s,i){const[a,u,p]=we(["object","function","object"],[n,s,i]);let _;return typeof r=="number"&&r<10||typeof r=="string"&&r.length===1?_=`0${r}`:_=`${r}`,be.builder().withPath(`/pub/player/${t}/games/${e}/${_}/pgn`).withQueryParameters(a).withHeaders(p).build().execute(ve.get,u)}function gs(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/clubs`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function ys(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/matches`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function bs(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/player/${t}/tournaments`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}function vs(t,e,r,n){const[s,i,a]=we(["object","function","object"],[e,r,n]);return be.builder().withPath(`/pub/titled/${t}`).withQueryParameters(s).withHeaders(a).build().execute(ve.get,i)}var ws={getPlayer:ls,getPlayerStats:cs,getPlayerOnline:fs,getPlayerCurrentDailyChess:hs,getPlayerToMoveDailyChess:ps,getPlayerMonthlyArchives:ds,getPlayerCompleteMonthlyArchives:_s,getPlayerMultiGamePGN:ms,getPlayerClubs:gs,getPlayerMatches:ys,getPlayerTournaments:bs,getTitledPlayers:vs};const Xt=ke,Jt=xe,{sortParameters:Yt}=Ae;function Es(t,e,r,n){const[s,i,a]=Yt(["object","function","object"],[e,r,n]);return Xt.builder().withPath(`/pub/club/${t}`).withQueryParameters(s).withHeaders(a).build().execute(Jt.get,i)}function Ps(t,e,r,n){const[s,i,a]=Yt(["object","function","object"],[e,r,n]);return Xt.builder().withPath(`/pub/club/${t}/members`).withQueryParameters(s).withHeaders(a).build().execute(Jt.get,i)}function Ss(t,e,r,n){const[s,i,a]=Yt(["object","function","object"],[e,r,n]);return Xt.builder().withPath(`/pub/club/${t}/matches`).withQueryParameters(s).withHeaders(a).build().execute(Jt.get,i)}var Ts={getClub:Es,getClubMembers:Ps,getClubMatches:Ss};const Vt=ke,Zt=xe,{sortParameters:er}=Ae;function Cs(t,e,r,n){const[s,i,a]=er(["object","function","object"],[e,r,n]);return Vt.builder().withPath(`/pub/tournament/${t}`).withQueryParameters(s).withHeaders(a).build().execute(Zt.get,i)}function As(t,e,r,n,s){const[i,a,u]=er(["object","function","object"],[r,n,s]);return Vt.builder().withPath(`/pub/tournament/${t}/${e}`).withQueryParameters(i).withHeaders(u).build().execute(Zt.get,a)}function ks(t,e,r,n,s,i){const[a,u,p]=er(["object","function","object"],[n,s,i]);return Vt.builder().withPath(`/pub/tournament/${t}/${e}/${r}`).withQueryParameters(a).withHeaders(p).build().execute(Zt.get,u)}var Rs={getTournament:Cs,getTournamentRound:As,getTournamentRoundGroup:ks};const Pt=ke,St=xe,{sortParameters:Tt}=Ae;function xs(t,e,r,n){const[s,i,a]=Tt(["object","function","object"],[e,r,n]);return Pt.builder().withPath(`/pub/match/${t}`).withQueryParameters(s).withHeaders(a).build().execute(St.get,i)}function Os(t,e,r,n,s){const[i,a,u]=Tt(["object","function","object"],[r,n,s]);return Pt.builder().withPath(`/pub/match/${t}/${e}`).withQueryParameters(i).withHeaders(u).build().execute(St.get,a)}function $s(t,e,r,n){const[s,i,a]=Tt(["object","function","object"],[e,r,n]);return Pt.builder().withPath(`/pub/match/live/${t}`).withQueryParameters(s).withHeaders(a).build().execute(St.get,i)}function Is(t,e,r,n,s){const[i,a,u]=Tt(["object","function","object"],[r,n,s]);return Pt.builder().withPath(`/pub/match/live/${t}/${e}`).withQueryParameters(i).withHeaders(u).build().execute(St.get,a)}var qs={getTeamMatch:xs,getTeamMatchBoard:Os,getTeamLiveMatch:$s,getTeamLiveMatchBoard:Is};const tr=ke,rr=xe,{sortParameters:nr}=Ae;function Ls(t,e,r,n){const[s,i,a]=nr(["object","function","object"],[e,r,n]);return tr.builder().withPath(`/pub/country/${t}`).withQueryParameters(s).withHeaders(a).build().execute(rr.get,i)}function Ns(t,e,r,n){const[s,i,a]=nr(["object","function","object"],[e,r,n]);return tr.builder().withPath(`/pub/country/${t}/players`).withQueryParameters(s).withHeaders(a).build().execute(rr.get,i)}function Ms(t,e,r,n){const[s,i,a]=nr(["object","function","object"],[e,r,n]);return tr.builder().withPath(`/pub/country/${t}/clubs`).withQueryParameters(s).withHeaders(a).build().execute(rr.get,i)}var Ds={getCountry:Ls,getCountryPlayers:Ns,getCountryClubs:Ms};const jr=ke,Hr=xe,{sortParameters:Qr}=Ae;function js(t,e,r){const[n,s,i]=Qr(["object","function","object"],[t,e,r]);return jr.builder().withPath("/pub/puzzle").withQueryParameters(n).withHeaders(i).build().execute(Hr.get,s)}function Hs(t,e,r){const[n,s,i]=Qr(["object","function","object"],[t,e,r]);return jr.builder().withPath("/pub/puzzle/random").withQueryParameters(n).withHeaders(i).build().execute(Hr.get,s)}var Qs={getDailyPuzzle:js,getDailyPuzzleRandom:Hs};const Us=ke,Ks=xe,{sortParameters:Bs}=Ae;function Fs(t,e,r){const[n,s,i]=Bs(["object","function","object"],[t,e,r]);return Us.builder().withPath("/pub/streamers").withQueryParameters(n).withHeaders(i).build().execute(Ks.get,s)}var Gs={getStreamers:Fs};const Ws=ke,zs=xe,{sortParameters:Xs}=Ae;function Js(t,e,r){const[n,s,i]=Xs(["object","function","object"],[t,e,r]);return Ws.builder().withPath("/pub/leaderboards").withQueryParameters(n).withHeaders(i).build().execute(zs.get,s)}var Ys={getLeaderboards:Js},Ur={};(function(t){var e=function(r){var n="b",s="w",i=-1,a="p",u="n",p="b",_="r",C="q",E="k",b="pnbrqkPNBRQK",D="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",S=["1-0","0-1","1/2-1/2","*"],O={b:[16,32,17,15],w:[-16,-32,-17,-15]},j={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},F=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],ce=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],P={p:0,n:1,b:2,r:3,q:4,k:5},V={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},c={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},d=7,m=6,v=1,$=0,T={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},B={w:[{square:T.a1,flag:c.QSIDE_CASTLE},{square:T.h1,flag:c.KSIDE_CASTLE}],b:[{square:T.a8,flag:c.QSIDE_CASTLE},{square:T.h8,flag:c.KSIDE_CASTLE}]},w=new Array(128),Q={w:i,b:i},H=s,G={w:0,b:0},ge=i,Ee=0,Oe=1,Re=[],fe={},se={};Ye(typeof r>"u"?D:r);function ir(o){typeof o>"u"&&(o=!1),w=new Array(128),Q={w:i,b:i},H=s,G={w:0,b:0},ge=i,Ee=0,Oe=1,Re=[],o||(fe={}),se={},lt(ue())}function or(){for(var o=[],l={},f=function(h){h in se&&(l[h]=se[h])};Re.length>0;)o.push($e());for(f(ue());o.length>0;)Pe(o.pop()),f(ue());se=l}function ar(){Ye(D)}function Ye(o,l){typeof l>"u"&&(l=!1);var f=o.split(/\s+/),h=f[0],g=0;if(!ur(o).valid)return!1;ir(l);for(var y=0;y<h.length;y++){var A=h.charAt(y);if(A==="/")g+=8;else if(Xr(A))g+=parseInt(A,10);else{var N=A<"a"?s:n;cr({type:A.toLowerCase(),color:N},_e(g)),g++}}return H=f[1],f[2].indexOf("K")>-1&&(G.w|=c.KSIDE_CASTLE),f[2].indexOf("Q")>-1&&(G.w|=c.QSIDE_CASTLE),f[2].indexOf("k")>-1&&(G.b|=c.KSIDE_CASTLE),f[2].indexOf("q")>-1&&(G.b|=c.QSIDE_CASTLE),ge=f[3]==="-"?i:T[f[3]],Ee=parseInt(f[4],10),Oe=parseInt(f[5],10),lt(ue()),!0}function ur(o){var l={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},f=o.split(/\s+/);if(f.length!==6)return{valid:!1,error_number:1,error:l[1]};if(isNaN(f[5])||parseInt(f[5],10)<=0)return{valid:!1,error_number:2,error:l[2]};if(isNaN(f[4])||parseInt(f[4],10)<0)return{valid:!1,error_number:3,error:l[3]};if(!/^(-|[abcdefgh][36])$/.test(f[3]))return{valid:!1,error_number:4,error:l[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(f[2]))return{valid:!1,error_number:5,error:l[5]};if(!/^(w|b)$/.test(f[1]))return{valid:!1,error_number:6,error:l[6]};var h=f[0].split("/");if(h.length!==8)return{valid:!1,error_number:7,error:l[7]};for(var g=0;g<h.length;g++){for(var y=0,A=!1,N=0;N<h[g].length;N++)if(isNaN(h[g][N])){if(!/^[prnbqkPRNBQK]$/.test(h[g][N]))return{valid:!1,error_number:9,error:l[9]};y+=1,A=!1}else{if(A)return{valid:!1,error_number:8,error:l[8]};y+=parseInt(h[g][N],10),A=!0}if(y!==8)return{valid:!1,error_number:10,error:l[10]}}return f[3][1]=="3"&&f[1]=="w"||f[3][1]=="6"&&f[1]=="b"?{valid:!1,error_number:11,error:l[11]}:{valid:!0,error_number:0,error:l[0]}}function ue(){for(var o=0,l="",f=T.a8;f<=T.h1;f++){if(w[f]==null)o++;else{o>0&&(l+=o,o=0);var h=w[f].color,g=w[f].type;l+=h===s?g.toUpperCase():g.toLowerCase()}f+1&136&&(o>0&&(l+=o),f!==T.h1&&(l+="/"),o=0,f+=8)}var y="";G[s]&c.KSIDE_CASTLE&&(y+="K"),G[s]&c.QSIDE_CASTLE&&(y+="Q"),G[n]&c.KSIDE_CASTLE&&(y+="k"),G[n]&c.QSIDE_CASTLE&&(y+="q"),y=y||"-";var A=ge===i?"-":_e(ge);return[l,H,y,A,Ee,Oe].join(" ")}function Ct(o){for(var l=0;l<o.length;l+=2)typeof o[l]=="string"&&typeof o[l+1]=="string"&&(fe[o[l]]=o[l+1]);return fe}function lt(o){Re.length>0||(o!==D?(fe.SetUp="1",fe.FEN=o):(delete fe.SetUp,delete fe.FEN))}function lr(o){var l=w[T[o]];return l?{type:l.type,color:l.color}:null}function cr(o,l){if(!("type"in o&&"color"in o)||b.indexOf(o.type.toLowerCase())===-1||!(l in T))return!1;var f=T[l];return o.type==E&&!(Q[o.color]==i||Q[o.color]==f)?!1:(w[f]={type:o.type,color:o.color},o.type===E&&(Q[o.color]=f),lt(ue()),!0)}function Fr(o){var l=lr(o);return w[T[o]]=null,l&&l.type===E&&(Q[l.color]=i),lt(ue()),l}function fr(o,l,f,h,g){var y={color:H,from:l,to:f,flags:h,piece:o[l].type};return g&&(y.flags|=c.PROMOTION,y.promotion=g),o[f]?y.captured=o[f].type:h&c.EP_CAPTURE&&(y.captured=a),y}function He(o){function l(qe,Le,U,oe,ze){if(qe[U].type===a&&(Ie(oe)===$||Ie(oe)===d))for(var et=[C,_,p,u],Ue=0,tt=et.length;Ue<tt;Ue++)Le.push(fr(qe,U,oe,ze,et[Ue]));else Le.push(fr(qe,U,oe,ze))}var f=[],h=H,g=Ze(h),y={b:v,w:m},A=T.a8,N=T.h1,I=!1,q=typeof o<"u"&&"legal"in o?o.legal:!0;if(typeof o<"u"&&"square"in o)if(o.square in T)A=N=T[o.square],I=!0;else return[];for(var M=A;M<=N;M++){if(M&136){M+=7;continue}var ie=w[M];if(!(ie==null||ie.color!==h))if(ie.type===a){var K=M+O[h][0];if(w[K]==null){l(w,f,M,K,c.NORMAL);var K=M+O[h][1];y[h]===Ie(M)&&w[K]==null&&l(w,f,M,K,c.BIG_PAWN)}for(W=2;W<4;W++){var K=M+O[h][W];K&136||(w[K]!=null&&w[K].color===g?l(w,f,M,K,c.CAPTURE):K===ge&&l(w,f,M,ge,c.EP_CAPTURE))}}else for(var W=0,X=j[ie.type].length;W<X;W++)for(var te=j[ie.type][W],K=M;K+=te,!(K&136);){if(w[K]==null)l(w,f,M,K,c.NORMAL);else{if(w[K].color===h)break;l(w,f,M,K,c.CAPTURE);break}if(ie.type==="n"||ie.type==="k")break}}if(!I||N===Q[h]){if(G[h]&c.KSIDE_CASTLE){var J=Q[h],re=J+2;w[J+1]==null&&w[re]==null&&!Qe(g,Q[h])&&!Qe(g,J+1)&&!Qe(g,re)&&l(w,f,Q[h],re,c.KSIDE_CASTLE)}if(G[h]&c.QSIDE_CASTLE){var J=Q[h],re=J-2;w[J-1]==null&&w[J-2]==null&&w[J-3]==null&&!Qe(g,Q[h])&&!Qe(g,J-1)&&!Qe(g,re)&&l(w,f,Q[h],re,c.QSIDE_CASTLE)}}if(!q)return f;for(var he=[],M=0,X=f.length;M<X;M++)Pe(f[M]),kt(h)||he.push(f[M]),$e();return he}function We(o,l){var f="";if(o.flags&c.KSIDE_CASTLE)f="O-O";else if(o.flags&c.QSIDE_CASTLE)f="O-O-O";else{var h=Wr(o,l);o.piece!==a&&(f+=o.piece.toUpperCase()+h),o.flags&(c.CAPTURE|c.EP_CAPTURE)&&(o.piece===a&&(f+=_e(o.from)[0]),f+="x"),f+=_e(o.to),o.flags&c.PROMOTION&&(f+="="+o.promotion.toUpperCase())}return Pe(o),ct()&&(Rt()?f+="#":f+="+"),$e(),f}function At(o){return o.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Qe(o,l){for(var f=T.a8;f<=T.h1;f++){if(f&136){f+=7;continue}if(!(w[f]==null||w[f].color!==o)){var h=w[f],g=f-l,y=g+119;if(F[y]&1<<P[h.type]){if(h.type===a){if(g>0){if(h.color===s)return!0}else if(h.color===n)return!0;continue}if(h.type==="n"||h.type==="k")return!0;for(var A=ce[y],N=f+A,I=!1;N!==l;){if(w[N]!=null){I=!0;break}N+=A}if(!I)return!0}}}return!1}function kt(o){return Qe(Ze(o),Q[o])}function ct(){return kt(H)}function Rt(){return ct()&&He().length===0}function xt(){return!ct()&&He().length===0}function Ot(){for(var o={},l=[],f=0,h=0,g=T.a8;g<=T.h1;g++){if(h=(h+1)%2,g&136){g+=7;continue}var y=w[g];y&&(o[y.type]=y.type in o?o[y.type]+1:1,y.type===p&&l.push(h),f++)}if(f===2)return!0;if(f===3&&(o[p]===1||o[u]===1))return!0;if(f===o[p]+2){for(var A=0,N=l.length,g=0;g<N;g++)A+=l[g];if(A===0||A===N)return!0}return!1}function $t(){for(var o=[],l={},f=!1;;){var h=$e();if(!h)break;o.push(h)}for(;;){var g=ue().split(" ").slice(0,4).join(" ");if(l[g]=g in l?l[g]+1:1,l[g]>=3&&(f=!0),!o.length)break;Pe(o.pop())}return f}function Gr(o){Re.push({move:o,kings:{b:Q.b,w:Q.w},turn:H,castling:{b:G.b,w:G.w},ep_square:ge,half_moves:Ee,move_number:Oe})}function Pe(o){var l=H,f=Ze(l);if(Gr(o),w[o.to]=w[o.from],w[o.from]=null,o.flags&c.EP_CAPTURE&&(H===n?w[o.to-16]=null:w[o.to+16]=null),o.flags&c.PROMOTION&&(w[o.to]={type:o.promotion,color:l}),w[o.to].type===E){if(Q[w[o.to].color]=o.to,o.flags&c.KSIDE_CASTLE){var h=o.to-1,g=o.to+1;w[h]=w[g],w[g]=null}else if(o.flags&c.QSIDE_CASTLE){var h=o.to+1,g=o.to-2;w[h]=w[g],w[g]=null}G[l]=""}if(G[l]){for(var y=0,A=B[l].length;y<A;y++)if(o.from===B[l][y].square&&G[l]&B[l][y].flag){G[l]^=B[l][y].flag;break}}if(G[f]){for(var y=0,A=B[f].length;y<A;y++)if(o.to===B[f][y].square&&G[f]&B[f][y].flag){G[f]^=B[f][y].flag;break}}o.flags&c.BIG_PAWN?H==="b"?ge=o.to-16:ge=o.to+16:ge=i,o.piece===a||o.flags&(c.CAPTURE|c.EP_CAPTURE)?Ee=0:Ee++,H===n&&Oe++,H=Ze(H)}function $e(){var o=Re.pop();if(o==null)return null;var l=o.move;Q=o.kings,H=o.turn,G=o.castling,ge=o.ep_square,Ee=o.half_moves,Oe=o.move_number;var f=H,h=Ze(H);if(w[l.from]=w[l.to],w[l.from].type=l.piece,w[l.to]=null,l.flags&c.CAPTURE)w[l.to]={type:l.captured,color:h};else if(l.flags&c.EP_CAPTURE){var g;f===n?g=l.to-16:g=l.to+16,w[g]={type:a,color:h}}if(l.flags&(c.KSIDE_CASTLE|c.QSIDE_CASTLE)){var y,A;l.flags&c.KSIDE_CASTLE?(y=l.to+1,A=l.to-1):l.flags&c.QSIDE_CASTLE&&(y=l.to-2,A=l.to+1),w[y]=w[A],w[A]=null}return l}function Wr(o,l){for(var f=He({legal:!l}),h=o.from,g=o.to,y=o.piece,A=0,N=0,I=0,q=0,M=f.length;q<M;q++){var ie=f[q].from,K=f[q].to,W=f[q].piece;y===W&&h!==ie&&g===K&&(A++,Ie(h)===Ie(ie)&&N++,Ve(h)===Ve(ie)&&I++)}return A>0?N>0&&I>0?_e(h):I>0?_e(h).charAt(1):_e(h).charAt(0):""}function zr(){for(var o=`   +------------------------+
`,l=T.a8;l<=T.h1;l++){if(Ve(l)===0&&(o+=" "+"87654321"[Ie(l)]+" |"),w[l]==null)o+=" . ";else{var f=w[l].type,h=w[l].color,g=h===s?f.toUpperCase():f.toLowerCase();o+=" "+g+" "}l+1&136&&(o+=`|
`,l+=8)}return o+=`   +------------------------+
`,o+=`     a  b  c  d  e  f  g  h
`,o}function It(o,l){var f=At(o);if(l){var h=f.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(h)var g=h[1],y=h[2],A=h[3],N=h[4]}for(var I=He(),q=0,M=I.length;q<M;q++){if(f===At(We(I[q]))||l&&f===At(We(I[q],!0)))return I[q];if(h&&(!g||g.toLowerCase()==I[q].piece)&&T[y]==I[q].from&&T[A]==I[q].to&&(!N||N.toLowerCase()==I[q].promotion))return I[q]}return null}function Ie(o){return o>>4}function Ve(o){return o&15}function _e(o){var l=Ve(o),f=Ie(o);return"abcdefgh".substring(l,l+1)+"87654321".substring(f,f+1)}function Ze(o){return o===s?n:s}function Xr(o){return"0123456789".indexOf(o)!==-1}function ft(o){var l=hr(o);l.san=We(l,!1),l.to=_e(l.to),l.from=_e(l.from);var f="";for(var h in c)c[h]&l.flags&&(f+=V[h]);return l.flags=f,l}function hr(o){var l=o instanceof Array?[]:{};for(var f in o)typeof f=="object"?l[f]=hr(o[f]):l[f]=o[f];return l}function pr(o){return o.replace(/^\s+|\s+$/g,"")}function dr(o){for(var l=He({legal:!1}),f=0,h=H,g=0,y=l.length;g<y;g++){if(Pe(l[g]),!kt(h))if(o-1>0){var A=dr(o-1);f+=A}else f++;$e()}return f}return{WHITE:s,BLACK:n,PAWN:a,KNIGHT:u,BISHOP:p,ROOK:_,QUEEN:C,KING:E,SQUARES:function(){for(var o=[],l=T.a8;l<=T.h1;l++){if(l&136){l+=7;continue}o.push(_e(l))}return o}(),FLAGS:V,load:function(o){return Ye(o)},reset:function(){return ar()},moves:function(o){for(var l=He(o),f=[],h=0,g=l.length;h<g;h++)typeof o<"u"&&"verbose"in o&&o.verbose?f.push(ft(l[h])):f.push(We(l[h],!1));return f},in_check:function(){return ct()},in_checkmate:function(){return Rt()},in_stalemate:function(){return xt()},in_draw:function(){return Ee>=100||xt()||Ot()||$t()},insufficient_material:function(){return Ot()},in_threefold_repetition:function(){return $t()},game_over:function(){return Ee>=100||Rt()||xt()||Ot()||$t()},validate_fen:function(o){return ur(o)},fen:function(){return ue()},board:function(){for(var o=[],l=[],f=T.a8;f<=T.h1;f++)w[f]==null?l.push(null):l.push({type:w[f].type,color:w[f].color}),f+1&136&&(o.push(l),l=[],f+=8);return o},pgn:function(o){var l=typeof o=="object"&&typeof o.newline_char=="string"?o.newline_char:`
`,f=typeof o=="object"&&typeof o.max_width=="number"?o.max_width:0,h=[],g=!1;for(var y in fe)h.push("["+y+' "'+fe[y]+'"]'+l),g=!0;g&&Re.length&&h.push(l);for(var A=function(X){var te=se[ue()];if(typeof te<"u"){var J=X.length>0?" ":"";X=`${X}${J}{${te}}`}return X},N=[];Re.length>0;)N.push($e());var I=[],q="";for(N.length===0&&I.push(A(""));N.length>0;){q=A(q);var M=N.pop();!Re.length&&M.color==="b"?q=Oe+". ...":M.color==="w"&&(q.length&&I.push(q),q=Oe+"."),q=q+" "+We(M,!1),Pe(M)}if(q.length&&I.push(A(q)),typeof fe.Result<"u"&&I.push(fe.Result),f===0)return h.join("")+I.join(" ");for(var ie=function(){return h.length>0&&h[h.length-1]===" "?(h.pop(),!0):!1},K=function(X,te){for(var J of te.split(" "))if(J){if(X+J.length>f){for(;ie();)X--;h.push(l),X=0}h.push(J),X+=J.length,h.push(" "),X++}return ie()&&X--,X},W=0,y=0;y<I.length;y++){if(W+I[y].length>f&&I[y].includes("{")){W=K(W,I[y]);continue}W+I[y].length>f&&y!==0?(h[h.length-1]===" "&&h.pop(),h.push(l),W=0):y!==0&&(h.push(" "),W++),h.push(I[y]),W+=I[y].length}return h.join("")},load_pgn:function(o,l){var f=typeof l<"u"&&"sloppy"in l?l.sloppy:!1;function h(U){return U.replace(/\\/g,"\\")}function g(U){for(var oe in U)return!0;return!1}function y(U,oe){for(var ze=typeof oe=="object"&&typeof oe.newline_char=="string"?oe.newline_char:`\r?
`,et={},Ue=U.split(new RegExp(h(ze))),tt="",_r="",ht=0;ht<Ue.length;ht++)tt=Ue[ht].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),_r=Ue[ht].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),pr(tt).length>0&&(et[tt]=_r);return et}var A=typeof l=="object"&&typeof l.newline_char=="string"?l.newline_char:`\r?
`,N=new RegExp("^(\\[((?:"+h(A)+")|.)*\\])(?:"+h(A)+"){2}"),I=N.test(o)?N.exec(o)[1]:"";ar();var q=y(I,l);for(var M in q)Ct([M,q[M]]);if(q.SetUp==="1"&&!("FEN"in q&&Ye(q.FEN,!0)))return!1;for(var ie=function(U){return Array.from(U).map(function(oe){return oe.charCodeAt(0)<128?oe.charCodeAt(0).toString(16):encodeURIComponent(oe).replace(/\%/g,"").toLowerCase()}).join("")},K=function(U){return U.length==0?"":decodeURIComponent("%"+U.match(/.{1,2}/g).join("%"))},W=function(U){return U=U.replace(new RegExp(h(A),"g")," "),`{${ie(U.slice(1,U.length-1))}}`},X=function(U){if(U.startsWith("{")&&U.endsWith("}"))return K(U.slice(1,U.length-1))},te=o.replace(I,"").replace(new RegExp(`({[^}]*})+?|;([^${h(A)}]*)`,"g"),function(U,oe,ze){return oe!==void 0?W(oe):" "+W(`{${ze.slice(1)}}`)}).replace(new RegExp(h(A),"g")," "),J=/(\([^\(\)]+\))+?/g;J.test(te);)te=te.replace(J,"");te=te.replace(/\d+\.(\.\.)?/g,""),te=te.replace(/\.\.\./g,""),te=te.replace(/\$\d+/g,"");var re=pr(te).split(new RegExp(/\s+/));re=re.join(",").replace(/,,+/g,",").split(",");for(var he="",qe=0;qe<re.length-1;qe++){var Le=X(re[qe]);if(Le!==void 0){se[ue()]=Le;continue}if(he=It(re[qe],f),he==null)return!1;Pe(he)}if(Le=X(re[re.length-1]),Le!==void 0&&(se[ue()]=Le,re.pop()),he=re[re.length-1],S.indexOf(he)>-1)g(fe)&&typeof fe.Result>"u"&&Ct(["Result",he]);else{if(he=It(he,f),he==null)return!1;Pe(he)}return!0},header:function(){return Ct(arguments)},ascii:function(){return zr()},turn:function(){return H},move:function(o,l){var f=typeof l<"u"&&"sloppy"in l?l.sloppy:!1,h=null;if(typeof o=="string")h=It(o,f);else if(typeof o=="object"){for(var g=He(),y=0,A=g.length;y<A;y++)if(o.from===_e(g[y].from)&&o.to===_e(g[y].to)&&(!("promotion"in g[y])||o.promotion===g[y].promotion)){h=g[y];break}}if(!h)return null;var N=ft(h);return Pe(h),N},undo:function(){var o=$e();return o?ft(o):null},clear:function(){return ir()},put:function(o,l){return cr(o,l)},get:function(o){return lr(o)},remove:function(o){return Fr(o)},perft:function(o){return dr(o)},square_color:function(o){if(o in T){var l=T[o];return(Ie(l)+Ve(l))%2===0?"light":"dark"}return null},history:function(o){for(var l=[],f=[],h=typeof o<"u"&&("verbose"in o)&&o.verbose;Re.length>0;)l.push($e());for(;l.length>0;){var g=l.pop();h?f.push(ft(g)):f.push(We(g)),Pe(g)}return f},get_comment:function(){return se[ue()]},set_comment:function(o){se[ue()]=o.replace("{","[").replace("}","]")},delete_comment:function(){var o=se[ue()];return delete se[ue()],o},get_comments:function(){return or(),Object.keys(se).map(function(o){return{fen:o,comment:se[o]}})},delete_comments:function(){return or(),Object.keys(se).map(function(o){var l=se[o];return delete se[o],{fen:o,comment:l}})}}};t.Chess=e})(Ur);const{Chess:br}=Ur,Vs=ke,vr=xe,wr=Dr,{sortParameters:Zs}=Ae,ei="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!?",Ft="abcdefgh",Gt=8,ti="#@$_[]^()~{}",ri="brnq",ni=4,Lt=3,si=1,ii=2,oi="chess.com",Er="Result missing or empty.";function sr(t){const e=Math.floor(t/Lt);if(e>ni-1)throw new Error(`Pawn promotion row index out of bounds: ${e}`);this.piece=ri[e],this.isCaptureLeft=t%Lt===si,this.isCaptureRight=t%Lt===ii}sr.prototype.getTo=function(t){const e=t[0],r=t[1],n=Ft.indexOf(e);let s;if(this.isCaptureLeft?s=n-1:s=this.isCaptureRight?n+1:n,s<0||s>Gt-1)throw new Error(`Invalid pawn promotion; file index out of bounds: ${s}`);const i=Ft[s];let a;if(r==="2")a="1";else if(r==="7")a="8";else throw new Error(`Invalid rank prior to pawn promotion: ${r}`);return`${i}${a}`};function Pr(t,e){const r=ei.indexOf(t);if(r===-1){if(e){const i=ti.indexOf(t);if(i!==-1)return new sr(i)}throw new Error(`Unrecognized move-character: ${t}`)}const n=Ft[r%Gt],s=Math.floor(r/Gt)+1;return`${n}${s}`}function ai(t,e){const r=e.length;if(r===0||r%2!==0)throw new Error(`Malformed field "game.moveList"; expected non-empty, even-number of characters: ${e}`);const n="FEN"in t?new br(t.FEN):new br;Object.keys(t).forEach(s=>{n.header(s,t[s])});for(let s=0;s<r;s+=2){const i={from:Pr(e[s],!1),to:Pr(e[s+1],!0)};i.to instanceof sr&&(i.promotion=i.to.piece,i.to=i.to.getTo(i.from)),n.move(i)}return n.pgn()}function Nt(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const n=typeof r<"u"?r:e;throw new Error(`Missing required field "${n}"`)}function Sr(t){const e=Nt(t,"game"),r=Nt(e,"moveList","game.moveList"),n=Nt(e,"pgnHeaders","game.pgnHeaders");e.pgn=ai(n,r)}function ui(t,e,r,n){const[s,i,a]=Zs(["object","function","object"],[e,r,n]),u=Vs.builder().withHost(oi).withPath(`/callback/live/game/${t}`).withQueryParameters(s).withHeaders(a).build();return i?(vr.get(u,(p,_)=>{if(p)i(p);else if(!_||!Object.prototype.hasOwnProperty.call(_,"body"))i(new wr(Er));else try{Sr(_.body),i(null,_)}catch(C){i(C)}}),null):new Promise((p,_)=>{vr.get(u,(C,E)=>{if(C)_(C);else if(!E||!Object.prototype.hasOwnProperty.call(E,"body"))_(new wr(Er));else try{Sr(E.body),p(E)}catch(b){_(b)}})})}var li={getGameByID:ui};const ci=Qn,{getPlayer:fi,getPlayerStats:hi,getPlayerOnline:pi,getPlayerCurrentDailyChess:di,getPlayerToMoveDailyChess:_i,getPlayerMonthlyArchives:mi,getPlayerCompleteMonthlyArchives:gi,getPlayerMultiGamePGN:yi,getPlayerClubs:bi,getPlayerMatches:vi,getPlayerTournaments:wi,getTitledPlayers:Ei}=ws,{getClub:Pi,getClubMembers:Si,getClubMatches:Ti}=Ts,{getTournament:Ci,getTournamentRound:Ai,getTournamentRoundGroup:ki}=Rs,{getTeamMatch:Ri,getTeamMatchBoard:xi,getTeamLiveMatch:Oi,getTeamLiveMatchBoard:$i}=qs,{getCountry:Ii,getCountryPlayers:qi,getCountryClubs:Li}=Ds,{getDailyPuzzle:Ni,getDailyPuzzleRandom:Mi}=Qs,{getStreamers:Di}=Gs,{getLeaderboards:ji}=Ys,{getGameByID:Hi}=li;function Kr(t){t&&"queue"in t&&t.queue&&(this.addMethods(ci),this.queueSetup())}Kr.prototype={addMethods(t){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)this[e[r]]=t[e[r]]},async ifChanged(t,e,r,n,s){if(!t||typeof t!="string")throw Error("etag required for ifChanged");if(!e||typeof e!="function")throw Error("dispatch requires request function");let i=[],a=null,u={};const p=[r,n,s];for(let _=0;_<p.length;_+=1)p[_]&&(p[_]instanceof Array?i=p[_]:typeof p[_]=="object"?u=p[_]:typeof p[_]=="function"&&(a=p[_]));try{return{changed:!0,response:await e(...i,u,a,{"If-None-Match":t})}}catch{return{changed:!1}}},getPlayer:fi,getPlayerStats:hi,getPlayerOnline:pi,getPlayerCurrentDailyChess:di,getPlayerToMoveDailyChess:_i,getPlayerMonthlyArchives:mi,getPlayerCompleteMonthlyArchives:gi,getPlayerMultiGamePGN:yi,getPlayerClubs:bi,getPlayerMatches:vi,getPlayerTournaments:wi,getTitledPlayers:Ei,getClub:Pi,getClubMembers:Si,getClubMatches:Ti,getTournament:Ci,getTournamentRound:Ai,getTournamentRoundGroup:ki,getTeamMatch:Ri,getTeamMatchBoard:xi,getTeamLiveMatch:Oi,getTeamLiveMatchBoard:$i,getCountry:Ii,getCountryPlayers:qi,getCountryClubs:Li,getDailyPuzzle:Ni,getDailyPuzzleRandom:Mi,getStreamers:Di,getLeaderboards:ji,getGameByID:Hi};var Qi=Kr;const Ui=Qi;var Ki=Ui;const Bi=tn(Ki),vt=new Bi,Fi={},Gi=R("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[R("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Wi=[Gi];function zi(t,e){return ne(),le("button",{class:"btn btn-square btn-outline btn-primary absolute top-5 left-5",onClick:e[0]||(e[0]=r=>t.$router.push("/"))},Wi)}const Xi=kr(Fi,[["render",zi]]);/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const ae="w",me="b",Z="p",Wt="n",gt="b",st="r",De="q",ee="k",Mt="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",pe=-1,Ji={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},k={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},x={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Dt={b:[16,32,17,15],w:[-16,-32,-17,-15]},Tr={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Yi=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Vi=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Zi={p:1,n:2,b:4,r:8,q:16,k:32},eo="pnbrqkPNBRQK",Cr=[Wt,gt,st,De],to=7,ro=6,no=1,so=0,dt={[ee]:k.KSIDE_CASTLE,[De]:k.QSIDE_CASTLE},Ne={w:[{square:x.a1,flag:k.QSIDE_CASTLE},{square:x.h1,flag:k.KSIDE_CASTLE}],b:[{square:x.a8,flag:k.QSIDE_CASTLE},{square:x.h8,flag:k.KSIDE_CASTLE}]},io={b:no,w:ro},oo=["1-0","0-1","1/2-1/2","*"];function Fe(t){return t>>4}function ot(t){return t&15}function Br(t){return"0123456789".indexOf(t)!==-1}function de(t){const e=ot(t),r=Fe(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(r,r+1)}function rt(t){return t===ae?me:ae}function ao(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const r=parseInt(e[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const s=e[0].split("/");if(s.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<s.length;a++){let u=0,p=!1;for(let _=0;_<s[a].length;_++)if(Br(s[a][_])){if(p)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};u+=parseInt(s[a][_],10),p=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[a][_]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};u+=1,p=!1}if(u!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const i=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:u}of i){if(!u.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((e[0].match(u)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return{ok:!0}}function uo(t,e){const r=t.from,n=t.to,s=t.piece;let i=0,a=0,u=0;for(let p=0,_=e.length;p<_;p++){const C=e[p].from,E=e[p].to,b=e[p].piece;s===b&&r!==C&&n===E&&(i++,Fe(r)===Fe(C)&&a++,ot(r)===ot(C)&&u++)}return i>0?a>0&&u>0?de(r):u>0?de(r).charAt(1):de(r).charAt(0):""}function Me(t,e,r,n,s,i=void 0,a=k.NORMAL){const u=Fe(n);if(s===Z&&(u===to||u===so))for(let p=0;p<Cr.length;p++){const _=Cr[p];t.push({color:e,from:r,to:n,piece:s,captured:i,promotion:_,flags:a|k.PROMOTION})}else t.push({color:e,from:r,to:n,piece:s,captured:i,flags:a})}function Ar(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:Z:(e=e.toLowerCase(),e==="o"?ee:e)}function jt(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class lo{constructor(e=Mt){ye(this,"_board",new Array(128));ye(this,"_turn",ae);ye(this,"_header",{});ye(this,"_kings",{w:pe,b:pe});ye(this,"_epSquare",-1);ye(this,"_halfMoves",0);ye(this,"_moveNumber",0);ye(this,"_history",[]);ye(this,"_comments",{});ye(this,"_castling",{w:0,b:0});this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:pe,b:pe},this._turn=ae,this._castling={w:0,b:0},this._epSquare=pe,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,r=!1){let n=e.split(/\s+/);if(n.length>=2&&n.length<6){const p=["-","-","0","1"];e=n.concat(p.slice(-(6-n.length))).join(" ")}n=e.split(/\s+/);const{ok:s,error:i}=ao(e);if(!s)throw new Error(i);const a=n[0];let u=0;this.clear(r);for(let p=0;p<a.length;p++){const _=a.charAt(p);if(_==="/")u+=8;else if(Br(_))u+=parseInt(_,10);else{const C=_<"a"?ae:me;this.put({type:_.toLowerCase(),color:C},de(u)),u++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=k.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=k.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=k.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=k.QSIDE_CASTLE),this._epSquare=n[3]==="-"?pe:x[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(this.fen())}fen(){var i,a;let e=0,r="";for(let u=x.a8;u<=x.h1;u++){if(this._board[u]){e>0&&(r+=e,e=0);const{color:p,type:_}=this._board[u];r+=p===ae?_.toUpperCase():_.toLowerCase()}else e++;u+1&136&&(e>0&&(r+=e),u!==x.h1&&(r+="/"),e=0,u+=8)}let n="";this._castling[ae]&k.KSIDE_CASTLE&&(n+="K"),this._castling[ae]&k.QSIDE_CASTLE&&(n+="Q"),this._castling[me]&k.KSIDE_CASTLE&&(n+="k"),this._castling[me]&k.QSIDE_CASTLE&&(n+="q"),n=n||"-";let s="-";if(this._epSquare!==pe){const u=this._epSquare+(this._turn===ae?16:-16),p=[u+1,u-1];for(const _ of p){if(_&136)continue;const C=this._turn;if(((i=this._board[_])==null?void 0:i.color)===C&&((a=this._board[_])==null?void 0:a.type)===Z){this._makeMove({color:C,from:_,to:this._epSquare,piece:Z,captured:Z,flags:k.EP_CAPTURE});const E=!this._isKingAttacked(C);if(this._undoMove(),E){s=de(this._epSquare);break}}}}return[r,this._turn,n,s,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Mt?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Mt)}get(e){return this._board[x[e]]||!1}put({type:e,color:r},n){if(eo.indexOf(e.toLowerCase())===-1||!(n in x))return!1;const s=x[n];return e==ee&&!(this._kings[r]==pe||this._kings[r]==s)?!1:(this._board[s]={type:e,color:r},e===ee&&(this._kings[r]=s),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}remove(e){const r=this.get(e);return delete this._board[x[e]],r&&r.type===ee&&(this._kings[r.color]=pe),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),r}_updateCastlingRights(){var n,s,i,a,u,p,_,C,E,b,D,S;const e=((n=this._board[x.e1])==null?void 0:n.type)===ee&&((s=this._board[x.e1])==null?void 0:s.color)===ae,r=((i=this._board[x.e8])==null?void 0:i.type)===ee&&((a=this._board[x.e8])==null?void 0:a.color)===me;(!e||((u=this._board[x.a1])==null?void 0:u.type)!==st||((p=this._board[x.a1])==null?void 0:p.color)!==ae)&&(this._castling.w&=~k.QSIDE_CASTLE),(!e||((_=this._board[x.h1])==null?void 0:_.type)!==st||((C=this._board[x.h1])==null?void 0:C.color)!==ae)&&(this._castling.w&=~k.KSIDE_CASTLE),(!r||((E=this._board[x.a8])==null?void 0:E.type)!==st||((b=this._board[x.a8])==null?void 0:b.color)!==me)&&(this._castling.b&=~k.QSIDE_CASTLE),(!r||((D=this._board[x.h8])==null?void 0:D.type)!==st||((S=this._board[x.h8])==null?void 0:S.color)!==me)&&(this._castling.b&=~k.KSIDE_CASTLE)}_updateEnPassantSquare(){var i,a;if(this._epSquare===pe)return;const e=this._epSquare+(this._turn===ae?-16:16),r=this._epSquare+(this._turn===ae?16:-16),n=[r+1,r-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((i=this._board[r])==null?void 0:i.color)!==rt(this._turn)||((a=this._board[r])==null?void 0:a.type)!==Z){this._epSquare=pe;return}const s=u=>{var p,_;return!(u&136)&&((p=this._board[u])==null?void 0:p.color)===this._turn&&((_=this._board[u])==null?void 0:_.type)===Z};n.some(s)||(this._epSquare=pe)}_attacked(e,r){for(let n=x.a8;n<=x.h1;n++){if(n&136){n+=7;continue}if(this._board[n]===void 0||this._board[n].color!==e)continue;const s=this._board[n],i=n-r;if(i===0)continue;const a=i+119;if(Yi[a]&Zi[s.type]){if(s.type===Z){if(i>0){if(s.color===ae)return!0}else if(s.color===me)return!0;continue}if(s.type==="n"||s.type==="k")return!0;const u=Vi[a];let p=n+u,_=!1;for(;p!==r;){if(this._board[p]!=null){_=!0;break}p+=u}if(!_)return!0}}return!1}_isKingAttacked(e){const r=this._kings[e];return r===-1?!1:this._attacked(rt(e),r)}isAttacked(e,r){return this._attacked(r,x[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},r=[];let n=0,s=0;for(let i=x.a8;i<=x.h1;i++){if(s=(s+1)%2,i&136){i+=7;continue}const a=this._board[i];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===gt&&r.push(s),n++)}if(n===2)return!0;if(n===3&&(e[gt]===1||e[Wt]===1))return!0;if(n===e[gt]+2){let i=0;const a=r.length;for(let u=0;u<a;u++)i+=r[u];if(i===0||i===a)return!0}return!1}isThreefoldRepetition(){const e=[],r={};let n=!1;for(;;){const s=this._undoMove();if(!s)break;e.push(s)}for(;;){const s=this.fen().split(" ").slice(0,4).join(" ");r[s]=s in r?r[s]+1:1,r[s]>=3&&(n=!0);const i=e.pop();if(i)this._makeMove(i);else break}return n}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:r=void 0,piece:n=void 0}={}){const s=this._moves({square:r,piece:n});return e?s.map(i=>this._makePretty(i)):s.map(i=>this._moveToSan(i,s))}_moves({legal:e=!0,piece:r=void 0,square:n=void 0}={}){var D;const s=n?n.toLowerCase():void 0,i=r==null?void 0:r.toLowerCase(),a=[],u=this._turn,p=rt(u);let _=x.a8,C=x.h1,E=!1;if(s)if(s in x)_=C=x[s],E=!0;else return[];for(let S=_;S<=C;S++){if(S&136){S+=7;continue}if(!this._board[S]||this._board[S].color===p)continue;const{type:O}=this._board[S];let j;if(O===Z){if(i&&i!==O)continue;j=S+Dt[u][0],this._board[j]||(Me(a,u,S,j,Z),j=S+Dt[u][1],io[u]===Fe(S)&&!this._board[j]&&Me(a,u,S,j,Z,void 0,k.BIG_PAWN));for(let F=2;F<4;F++)j=S+Dt[u][F],!(j&136)&&(((D=this._board[j])==null?void 0:D.color)===p?Me(a,u,S,j,Z,this._board[j].type,k.CAPTURE):j===this._epSquare&&Me(a,u,S,j,Z,Z,k.EP_CAPTURE))}else{if(i&&i!==O)continue;for(let F=0,ce=Tr[O].length;F<ce;F++){const P=Tr[O][F];for(j=S;j+=P,!(j&136);){if(!this._board[j])Me(a,u,S,j,O);else{if(this._board[j].color===u)break;Me(a,u,S,j,O,this._board[j].type,k.CAPTURE);break}if(O===Wt||O===ee)break}}}}if((i===void 0||i===ee)&&(!E||C===this._kings[u])){if(this._castling[u]&k.KSIDE_CASTLE){const S=this._kings[u],O=S+2;!this._board[S+1]&&!this._board[O]&&!this._attacked(p,this._kings[u])&&!this._attacked(p,S+1)&&!this._attacked(p,O)&&Me(a,u,this._kings[u],O,ee,void 0,k.KSIDE_CASTLE)}if(this._castling[u]&k.QSIDE_CASTLE){const S=this._kings[u],O=S-2;!this._board[S-1]&&!this._board[S-2]&&!this._board[S-3]&&!this._attacked(p,this._kings[u])&&!this._attacked(p,S-1)&&!this._attacked(p,O)&&Me(a,u,this._kings[u],O,ee,void 0,k.QSIDE_CASTLE)}}if(!e||this._kings[u]===-1)return a;const b=[];for(let S=0,O=a.length;S<O;S++)this._makeMove(a[S]),this._isKingAttacked(u)||b.push(a[S]),this._undoMove();return b}move(e,{strict:r=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,r);else if(typeof e=="object"){const i=this._moves();for(let a=0,u=i.length;a<u;a++)if(e.from===de(i[a].from)&&e.to===de(i[a].to)&&(!("promotion"in i[a])||e.promotion===i[a].promotion)){n=i[a];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const s=this._makePretty(n);return this._makeMove(n),s}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const r=this._turn,n=rt(r);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&k.EP_CAPTURE&&(this._turn===me?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:r}),this._board[e.to].type===ee){if(this._kings[r]=e.to,e.flags&k.KSIDE_CASTLE){const s=e.to-1,i=e.to+1;this._board[s]=this._board[i],delete this._board[i]}else if(e.flags&k.QSIDE_CASTLE){const s=e.to+1,i=e.to-2;this._board[s]=this._board[i],delete this._board[i]}this._castling[r]=0}if(this._castling[r]){for(let s=0,i=Ne[r].length;s<i;s++)if(e.from===Ne[r][s].square&&this._castling[r]&Ne[r][s].flag){this._castling[r]^=Ne[r][s].flag;break}}if(this._castling[n]){for(let s=0,i=Ne[n].length;s<i;s++)if(e.to===Ne[n][s].square&&this._castling[n]&Ne[n][s].flag){this._castling[n]^=Ne[n][s].flag;break}}e.flags&k.BIG_PAWN?r===me?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=pe,e.piece===Z?this._halfMoves=0:e.flags&(k.CAPTURE|k.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,r===me&&this._moveNumber++,this._turn=n}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const r=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const n=this._turn,s=rt(n);if(this._board[r.from]=this._board[r.to],this._board[r.from].type=r.piece,delete this._board[r.to],r.captured)if(r.flags&k.EP_CAPTURE){let i;n===me?i=r.to-16:i=r.to+16,this._board[i]={type:Z,color:s}}else this._board[r.to]={type:r.captured,color:s};if(r.flags&(k.KSIDE_CASTLE|k.QSIDE_CASTLE)){let i,a;r.flags&k.KSIDE_CASTLE?(i=r.to+1,a=r.to-1):(i=r.to-2,a=r.to+1),this._board[i]=this._board[a],delete this._board[a]}return r}pgn({newline:e=`
`,maxWidth:r=0}={}){const n=[];let s=!1;for(const b in this._header)n.push("["+b+' "'+this._header[b]+'"]'+e),s=!0;s&&this._history.length&&n.push(e);const i=b=>{const D=this._comments[this.fen()];if(typeof D<"u"){const S=b.length>0?" ":"";b=`${b}${S}{${D}}`}return b},a=[];for(;this._history.length>0;)a.push(this._undoMove());const u=[];let p="";for(a.length===0&&u.push(i(""));a.length>0;){p=i(p);const b=a.pop();if(!b)break;if(!this._history.length&&b.color==="b"){const D=`${this._moveNumber}. ...`;p=p?`${p} ${D}`:D}else b.color==="w"&&(p.length&&u.push(p),p=this._moveNumber+".");p=p+" "+this._moveToSan(b,this._moves({legal:!0})),this._makeMove(b)}if(p.length&&u.push(i(p)),typeof this._header.Result<"u"&&u.push(this._header.Result),r===0)return n.join("")+u.join(" ");const _=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},C=function(b,D){for(const S of D.split(" "))if(S){if(b+S.length>r){for(;_();)b--;n.push(e),b=0}n.push(S),b+=S.length,n.push(" "),b++}return _()&&b--,b};let E=0;for(let b=0;b<u.length;b++){if(E+u[b].length>r&&u[b].includes("{")){E=C(E,u[b]);continue}E+u[b].length>r&&b!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),E=0):b!==0&&(n.push(" "),E++),n.push(u[b]),E+=u[b].length}return n.join("")}header(...e){for(let r=0;r<e.length;r+=2)typeof e[r]=="string"&&typeof e[r+1]=="string"&&(this._header[e[r]]=e[r+1]);return this._header}loadPgn(e,{strict:r=!1,newlineChar:n=`\r?
`}={}){function s(P){return P.replace(/\\/g,"\\")}function i(P){const V={},c=P.split(new RegExp(s(n)));let d="",m="";for(let v=0;v<c.length;v++){const $=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;d=c[v].replace($,"$1"),m=c[v].replace($,"$2"),d.trim().length>0&&(V[d]=m)}return V}e=e.trim();const u=new RegExp("^(\\[((?:"+s(n)+")|.)*\\])((?:\\s*"+s(n)+"){2}|(?:\\s*"+s(n)+")*$)").exec(e),p=u&&u.length>=2?u[1]:"";this.reset();const _=i(p);let C="";for(const P in _)P.toLowerCase()==="fen"&&(C=_[P]),this.header(P,_[P]);if(!r)C&&this.load(C,!0);else if(_.SetUp==="1"){if(!("FEN"in _))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(_.FEN,!0)}function E(P){return Array.from(P).map(function(V){return V.charCodeAt(0)<128?V.charCodeAt(0).toString(16):encodeURIComponent(V).replace(/%/g,"").toLowerCase()}).join("")}function b(P){return P.length==0?"":decodeURIComponent("%"+(P.match(/.{1,2}/g)||[]).join("%"))}const D=function(P){return P=P.replace(new RegExp(s(n),"g")," "),`{${E(P.slice(1,P.length-1))}}`},S=function(P){if(P.startsWith("{")&&P.endsWith("}"))return b(P.slice(1,P.length-1))};let O=e.replace(p,"").replace(new RegExp(`({[^}]*})+?|;([^${s(n)}]*)`,"g"),function(P,V,c){return V!==void 0?D(V):" "+D(`{${c.slice(1)}}`)}).replace(new RegExp(s(n),"g")," ");const j=/(\([^()]+\))+?/g;for(;j.test(O);)O=O.replace(j,"");O=O.replace(/\d+\.(\.\.)?/g,""),O=O.replace(/\.\.\./g,""),O=O.replace(/\$\d+/g,"");let F=O.trim().split(new RegExp(/\s+/));F=F.filter(P=>P!=="");let ce="";for(let P=0;P<F.length;P++){const V=S(F[P]);if(V!==void 0){this._comments[this.fen()]=V;continue}const c=this._moveFromSan(F[P],r);if(c==null)if(oo.indexOf(F[P])>-1)ce=F[P];else throw new Error(`Invalid move in PGN: ${F[P]}`);else ce="",this._makeMove(c)}ce&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",ce)}_moveToSan(e,r){let n="";if(e.flags&k.KSIDE_CASTLE)n="O-O";else if(e.flags&k.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==Z){const s=uo(e,r);n+=e.piece.toUpperCase()+s}e.flags&(k.CAPTURE|k.EP_CAPTURE)&&(e.piece===Z&&(n+=de(e.from)[0]),n+="x"),n+=de(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,r=!1){const n=jt(e);let s=Ar(n),i=this._moves({legal:!0,piece:s});for(let b=0,D=i.length;b<D;b++)if(n===jt(this._moveToSan(i[b],i)))return i[b];if(r)return null;let a,u,p,_,C,E=!1;if(u=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),u?(a=u[1],p=u[2],_=u[3],C=u[4],p.length==1&&(E=!0)):(u=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),u&&(a=u[1],p=u[2],_=u[3],C=u[4],p.length==1&&(E=!0))),s=Ar(n),i=this._moves({legal:!0,piece:a||s}),!_)return null;for(let b=0,D=i.length;b<D;b++)if(p){if((!a||a.toLowerCase()==i[b].piece)&&x[p]==i[b].from&&x[_]==i[b].to&&(!C||C.toLowerCase()==i[b].promotion))return i[b];if(E){const S=de(i[b].from);if((!a||a.toLowerCase()==i[b].piece)&&x[_]==i[b].to&&(p==S[0]||p==S[1])&&(!C||C.toLowerCase()==i[b].promotion))return i[b]}}else if(n===jt(this._moveToSan(i[b],i)).replace("x",""))return i[b];return null}ascii(){let e=`   +------------------------+
`;for(let r=x.a8;r<=x.h1;r++){if(ot(r)===0&&(e+=" "+"87654321"[Fe(r)]+" |"),this._board[r]){const n=this._board[r].type,i=this._board[r].color===ae?n.toUpperCase():n.toLowerCase();e+=" "+i+" "}else e+=" . ";r+1&136&&(e+=`|
`,r+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const r=this._moves({legal:!1});let n=0;const s=this._turn;for(let i=0,a=r.length;i<a;i++)this._makeMove(r[i]),this._isKingAttacked(s)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}_makePretty(e){const{color:r,piece:n,from:s,to:i,flags:a,captured:u,promotion:p}=e;let _="";for(const D in k)k[D]&a&&(_+=Ji[D]);const C=de(s),E=de(i),b={color:r,piece:n,from:C,to:E,san:this._moveToSan(e,this._moves({legal:!0})),flags:_,lan:C+E,before:this.fen(),after:""};return this._makeMove(e),b.after=this.fen(),this._undoMove(),u&&(b.captured=u),p&&(b.promotion=p,b.lan+=p),b}turn(){return this._turn}board(){const e=[];let r=[];for(let n=x.a8;n<=x.h1;n++)this._board[n]==null?r.push(null):r.push({square:de(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(r),r=[],n+=8);return e}squareColor(e){if(e in x){const r=x[e];return(Fe(r)+ot(r))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const r=[],n=[];for(;this._history.length>0;)r.push(this._undoMove());for(;;){const s=r.pop();if(!s)break;e?n.push(this._makePretty(s)):n.push(this._moveToSan(s,this._moves())),this._makeMove(s)}return n}_pruneComments(){const e=[],r={},n=s=>{s in this._comments&&(r[s]=this._comments[s])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const s=e.pop();if(!s)break;this._makeMove(s),n(this.fen())}this._comments=r}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const r=this._comments[e];return delete this._comments[e],{fen:e,comment:r}})}setCastlingRights(e,r){for(const s of[ee,De])r[s]!==void 0&&(r[s]?this._castling[e]|=dt[s]:this._castling[e]&=~dt[s]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(r[ee]===void 0||r[ee]===n[ee])&&(r[De]===void 0||r[De]===n[De])}getCastlingRights(e){return{[ee]:(this._castling[e]&dt[ee])!==0,[De]:(this._castling[e]&dt[De])!==0}}moveNumber(){return this._moveNumber}}const co={key:0},fo={class:"stats"},ho={class:"stat"},po={class:"stat-figure"},_o={class:"avatar"},mo={class:"w-12 rounded-full"},go=["src"],yo={class:"stat-value text-lg"},bo={class:"stat-title text-right text-base"},vo={class:"stat"},wo={key:1},Eo={__name:"UserInfoGame",props:{username:String},setup(t){const e=t,r=Xe(void 0);return wt(()=>{const n=s=>{vt.getPlayer(e.username).then(i=>{r.value=i.body}).catch(()=>{s<10&&n(s++)})};n(0)}),(n,s)=>{const i=Ht("flag"),a=Ht("router-link");return r.value!==void 0?(ne(),le("div",co,[je(a,{to:"/user?username="+t.username},{default:Vr(()=>[R("div",fo,[R("div",ho,[R("div",po,[R("div",_o,[R("div",mo,[R("img",{src:r.value.avatar??Se(Rr)},null,8,go)])])]),R("div",yo,Te(r.value.name??r.value.username),1),R("div",bo,Te(r.value.username),1)]),R("div",vo,[je(i,{iso:r.value.country.split("/").pop(),class:"stat-figure rounded-lg text-3xl"},null,8,["iso"])])])]),_:1},8,["to"])])):(ne(),le("p",wo,Te(t.username),1))}}},Po={class:"w-full flex flex-row justify-between"},So={class:"text-right"},To={__name:"GamePreview",props:{gameData:Object,username:String},setup(t){const e=t,r=new lo;return wt(()=>{r.loadPgn(e.gameData.pgn)}),(n,s)=>(ne(),le("div",Po,[nt(Te(Se(r)._header.EndDate)+" :::: "+Te(Se(r)._header.EndTime)+" ",1),R("div",So,[je(Eo,{username:t.username.toLowerCase()===Se(r)._header.White.toLowerCase()?Se(r)._header.Black:Se(r)._header.White},null,8,["username"])])]))}},Co={key:0},Ao=R("progress",{class:"progress progress-primary w-48"},null,-1),ko=[Ao],Ro={key:1,class:"flex flex-row space-x-5",style:{width:"80vw"}},xo={class:"menu bg-base-100 shadow-2xl p-2 rounded-box space-y-2 h-min"},Oo=["onClick"],$o={class:"menu bg-base-100 shadow-2xl p-2 rounded-box space-y-2 h-mi w-full"},Io={key:0,class:"text-center py-3"},qo=R("progress",{class:"progress progress-primary w-48"},null,-1),Lo=[qo],No={__name:"PlayedGamesTable",props:{username:String},setup(t){const e=t,r=Xe(void 0),n=Xe(0),s=Xe(void 0);wt(()=>{vt.getPlayerMonthlyArchives(e.username).then(a=>{r.value=a.body.archives.map(u=>u.match(/\d{4}\/\d{2}$/)[0]).reverse(),i()})});function i(){s.value=void 0;const[a,u]=r.value[n.value].split("/");vt.getPlayerCompleteMonthlyArchives(e.username,a,u).then(p=>{s.value=p.body.games.filter(_=>_.pgn!==void 0)})}return(a,u)=>r.value===void 0?(ne(),le("div",Co,ko)):(ne(),le("div",Ro,[R("ul",xo,[(ne(!0),le(mr,null,gr(r.value,(p,_)=>(ne(),le("li",{key:_},[R("a",{class:Zr({active:_===n.value}),onClick:()=>{n.value=_,i()}},Te(p),11,Oo)]))),128))]),R("div",$o,[s.value===void 0?(ne(),le("div",Io,Lo)):(ne(!0),le(mr,{key:1},gr(s.value,p=>(ne(),le("li",{key:p.uuid},[R("a",null,[je(To,{"game-data":p,username:t.username},null,8,["game-data","username"])])]))),128))])]))}},Mo={key:2},Do={class:"p-5 flex flex-col items-center space-y-8"},Uo={__name:"User",setup(t){let e;const r=Xe(!0),n=Xe(!1);return wt(()=>{const s=(en().query.username??"").toString();vt.getPlayer(s).then(a=>{e=a.body}).catch(()=>{e=s,n.value=!0}).finally(()=>{r.value=!1})}),(s,i)=>r.value?(ne(),yr(gn,{key:0})):n.value?(ne(),yr(fn,{key:1,username:Se(e)},null,8,["username"])):(ne(),le("div",Mo,[je(Xi),R("div",Do,[R("div",null,[je(On,{data:Se(e)},null,8,["data"])]),R("div",null,[je(No,{username:Se(e).username},null,8,["username"])])])]))}};export{Uo as default};
